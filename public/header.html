<header class="header">
    <!-- –ë—É—Ä–≥–µ—Ä-–º–µ–Ω—é -->
    <div class="burger-menu" onclick="toggleSidebar()">
        <span class="burger-icon">‚ò∞</span>
    </div>

    <!-- –õ–æ–≥–æ—Ç–∏–ø -->
    <div class="logo-container">
        <a href="students.html">
            <img src="logo.png" alt="Logo - Dragon and Book">
        </a>
    </div>

    <div class="menu">
        <!-- –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è -->
        <div class="icon-container">
            <div class="icon" id="bellIcon">
                <a href="messages.html" onclick="clearNotificationIndicator()">
                    <img src="bell.png" alt="Notification Bell">
                </a>
                <div id="notificationInd" class="notification-ind"></div>
                <div class="dropdown">
                    <div class="notification-item">
                        <img src="profile-icon-png-898.png" alt="Admin Profile Icon">
                        <div class="notification-text">
                            <span class="name"> Admin </span>
                            <span class="message"> Hello!</span>
                        </div>
                    </div>
                    <div class="notification-item">
                        <img src="profile-icon-png-898.png" alt="Anna S. Profile Icon">
                        <div class="notification-text">
                            <span class="name"> Anna S. </span>
                            <span class="message"> Hello!</span>
                        </div>
                    </div>
                    <div class="notification-item">
                        <img src="profile-icon-png-898.png" alt="Maria T. Profile Icon">
                        <div class="notification-text">
                            <span class="name"> Maria T. </span>
                            <span class="message"> Hello!</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –ü—Ä–æ—Ñ—ñ–ª—å -->
        <div class="profile-container">
            <div class="profile">
                <img src="profile.png" alt="User Profile Icon">
                <span id="username-display">Loading...</span>
                
                <div class="dropdown">
                    <div class="profile-item">Profile</div>
                    <div class="profile-item" id="logoutBtn">Log out</div>
                </div>
            </div>
        </div>
    </div>
</header>

<script>
// –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
async function loadUserInfo() {
    const usernameDisplay = document.getElementById('username-display');
    
    try {
        console.log('üîç Trying to load user info...');
        
        // –°–ø—Ä–æ–±—É—î–º–æ —Ä—ñ–∑–Ω—ñ —à–ª—è—Ö–∏
        const possiblePaths = ['/getuser.php', '/public/getuser.php', 'getuser.php'];
        let response = null;
        let workingPath = null;
        
        for (const path of possiblePaths) {
            try {
                console.log(`üîç Trying path: ${path}`);
                response = await fetch(path, {
                    method: 'GET',
                    credentials: 'include', // –í–∞–∂–ª–∏–≤–æ –¥–ª—è —Å–µ—Å—ñ–π
                    headers: {
                        'Accept': 'application/json',
                        'Content-Type': 'application/json'
                    }
                });
                
                if (response.ok) {
                    workingPath = path;
                    break;
                }
            } catch (e) {
                console.log(`‚ùå Path ${path} failed:`, e.message);
                continue;
            }
        }
        
        if (!response || !response.ok) {
            throw new Error(`HTTP error! status: ${response?.status || 'No response'}`);
        }
        
        console.log(`‚úÖ Working path found: ${workingPath}`);
        const data = await response.json();
        console.log('üì¶ User data received:', data);
        
        if (data.success && data.user) {
            // –í—ñ–¥–æ–±—Ä–∞–∂–∞—î–º–æ —ñ–º'—è —Ç–∞ –ø—Ä—ñ–∑–≤–∏—â–µ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
            const fullName = `${data.user.name} ${data.user.surname}`;
            usernameDisplay.textContent = fullName;
            usernameDisplay.style.color = '#28a745'; // –ó–µ–ª–µ–Ω–∏–π –∫–æ–ª—ñ—Ä –¥–ª—è —É—Å–ø—ñ—Ö—É
            
            // –ó–±–µ—Ä—ñ–≥–∞—î–º–æ –¥–∞–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –¥–ª—è –ø–æ–¥–∞–ª—å—à–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
            window.currentUser = data.user;
            console.log('‚úÖ User info loaded successfully:', fullName);
        } else {
            usernameDisplay.textContent = 'Guest';
            usernameDisplay.style.color = '#dc3545'; // –ß–µ—Ä–≤–æ–Ω–∏–π –∫–æ–ª—ñ—Ä –¥–ª—è –ø–æ–º–∏–ª–∫–∏
            console.warn('‚ö†Ô∏è User not authenticated:', data.message || 'Unknown reason');
        }
    } catch (error) {
        console.error('‚ùå Error loading user info:', error);
        usernameDisplay.textContent = '‚ùå Error';
        usernameDisplay.style.color = '#dc3545';
        
        // –ü–æ–∫–∞–∑—É—î–º–æ –¥–µ—Ç–∞–ª—å–Ω—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –≤ –∫–æ–Ω—Å–æ–ª—ñ
        console.log('üîç Current URL:', window.location.href);
        console.log('üîç Current origin:', window.location.origin);
    }
}

// –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î–º–æ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ —Ö–µ–¥–µ—Ä–∞
// –î–æ–¥–∞—î–º–æ –Ω–µ–≤–µ–ª–∏–∫—É –∑–∞—Ç—Ä–∏–º–∫—É —â–æ–± –ø–µ—Ä–µ–∫–æ–Ω–∞—Ç–∏—Å—è —â–æ DOM –≥–æ—Ç–æ–≤–∏–π
setTimeout(loadUserInfo, 100);
</script>